<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Coral Bleaching — Dashboard</title>

  <!-- Vega / Vega-Lite / Embed -->
  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>

  <!-- Pure.css grid -->
  <link rel="stylesheet" href="https://unpkg.com/purecss@2.0.6/build/pure-min.css" />

  <!-- Fonts (optional) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">

  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    :root { --pad: 14px; }
    body { font-family: "Open Sans", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin: 0; color:#222; }
    .page { max-width: 1200px; margin: 0 auto; padding: 18px; }
    h1 { margin: 0 0 6px; font-size: 28px; }
    h2 { margin: 0 0 8px; font-size: 20px; }
    p  { line-height: 1.45; }

    .vis-card, .text-card {
      background: #fff; border: 1px solid #e8ecef; border-radius: 10px;
      box-shadow: 0 1px 2px rgba(0,0,0,0.04);
      padding: var(--pad); margin-bottom: 16px;
    }
    .vis-container { width: 100%; min-height: 420px; }
    .small { font-size: 12px; color:#666; }

    /* tighten gutters a touch on desktop */
    .pure-g > [class*="pure-u"] { padding: 6px; }
    @media (max-width: 768px) {
      .vis-container { min-height: 340px; }
    }

    /* sticky caption area beside matrix (optional) */
    .sticky { position: sticky; top: 10px; }
  </style>
</head>

<body>
  <div class="page">
    <!-- Header -->
    <div class="pure-g">
      <div class="pure-u-1">
        <h1>Global Coral Bleaching</h1>
        <p class="small">Exploring how temperature and local conditions relate to bleaching outcomes.</p>
      </div>
    </div>

    <!-- SECTION 1: Overview visual (map + timeline + area) -->
    <div class="pure-g">
      <div class="pure-u-1">
        <div class="vis-card">
          <h2>Section 1 — Overview</h2>
          <div id="vis-overview" class="vis-container"></div>
        </div>
      </div>
    </div>

    <!-- SECTION 1 annotations: two text columns -->
    <div class="pure-g">
      <div class="pure-u-1-2">
        <div class="text-card">
          <h2>Key Takeaways</h2>
          <p>
            • Bleaching events cluster in years ....<br/>
            • talking about cetrain regions<br/>
            • talk about increase in research in some years
          </p>
        </div>
      </div>
      <div class="pure-u-1-2">
        <div class="text-card">
          <h2>About coral bleaching</h2>
          <p>
            • talk about the bleaching percentages<br/>
            • 0-1% bleaching is fairly normal etc etc <br/>
            • risk about bleaching itself
          </p>
        </div>
      </div>
    </div>

    <!-- SECTION 3: Matrix on the right, description on the left -->
    <div class="pure-g">
      <!-- Left column: description -->
      <div class="pure-u-1 pure-u-md-1-3">
        <div class="text-card sticky">
          <h2>Section 3 — Relationships</h2>
          <p>
            This matrix explores how <em>Percent Bleaching</em> varies with <em>Depth</em> and
            <em>Turbidity</em>. Please use brush to highlight subsets
          </p>
          <p class="small">
            more descriptions - talk about no more clear trends so temperature is the leading factor
          </p>
        </div>
      </div>

      <!-- Right column: matrix visual -->
      <div class="pure-u-1 pure-u-md-2-3">
        <div class="vis-card">
          <div id="vis-matrix" class="vis-container"></div>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <div class="pure-g">
      <div class="pure-u-1">
        <p class="small">
          Source: van Woesik et&nbsp;al. (BCO-DMO dataset 773466). Built with Vega-Lite & Pure.css.
        </p>
      </div>
    </div>
  </div>

  <script>
    // Point these to your spec files
    const specOverview = "section1_visualisation.vg.json";   // map + timeline + area (your combined overview)
    const specMatrix   = "section3_visualisation.vg.json";   // your 3×3 matrix (SPLOM or binned matrix)

    // Embed visuals (no action buttons for a cleaner look)
    vegaEmbed("#vis-overview", specOverview, {actions: false}).catch(console.error);
    vegaEmbed("#vis-matrix",   specMatrix,   {actions: false}).catch(console.error);
  </script>
</body>
</html>
