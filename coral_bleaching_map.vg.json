{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width": 900,
  "height": 520,
  "title": "Percentage Coral Bleaching at Reef Monitoring Sites Globally (2015â€“2020)",
  "projection": {"type": "equalEarth"},
  "layer": [
    {
      "data": {
        "url": "ne_110m.json",
        "format": {"type": "topojson", "feature": "ne_110m_admin_0_countries"}
      },
      "mark": {"type": "geoshape", "fill": "lightgray", "stroke": "#979ea7"}
      
    },
    {
      "data": {
        "url": "https://raw.githubusercontent.com/FIT3179/Vega-Lite/main/7_others/oceans.topojson",
        "format": {"type": "topojson", "feature": "oceans"}
      },
      "mark": {"type": "geoshape", "fill": "#95bee9"}
    },
    {
      "data": {
        "url": "https://raw.githubusercontent.com/FIT3179/Vega-Lite/main/2_symbol_map/js/WorldMapWithGraticules.topojson",
        "format": {"type": "topojson", "feature": "ne_110m_graticules_30"}
      },
      "mark": {"type": "geoshape", "fill": null, "stroke": "#d2dce7"}
    },
    {
      "data": {"url":"global_bleaching_environmental.csv"},
      "transform": [
        {"filter": "datum.Date_Year >= 2015 && datum.Date_Year <= 2020"},
        {"filter": "isValid(datum.Percent_Bleaching) && datum.Percent_Bleaching != null"}
      ],
      "mark": {"type": "circle", "opacity": 0.7, "stroke": "white", "strokeWidth": 0.1},
      "encoding": {
        "longitude": {"field": "Longitude_Degrees", "type": "quantitative"},
        "latitude": {"field": "Latitude_Degrees", "type": "quantitative"},
        "size": {"value": 60},
        "color": {
          "field": "Percent_Bleaching",
          "type": "quantitative",
          "title": "Coral Cover Bleached (%)",
          "scale": {"domain":  [0, 100], "scheme": "yelloworangered", "clamp": true},
          "legend": {"format": ".0f"}
        },
        "tooltip": [
          {"field": "Site_ID", "title": "Site ID"},
          {"field": "Site_Name", "title": "Site Name"},
          {"field": "Country_Name", "title": "Country Name"},
          {"field": "Percent_Bleaching", "type": "quantitative", "format": ".1f", "title": "Coral Cover Bleached (%)"},
          {"field": "Depth_m", "type": "quantitative", "format": ".0f", "title": "Depth (m)"},
          {"field": "Temperature_Mean", "type": "quantitative", "format": ".1f", "title": "Temperature (mean)"},
          {"field": "Date_Year", "type": "quantitative", "title": "Year"}
        ]
      }
    }
  ]
}
